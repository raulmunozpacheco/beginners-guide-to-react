<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script src="https://unpkg.com/vanilla-tilt@1.7.0/dist/vanilla-tilt.min.js"></script>
  <style>
    /*
    Taken from the vanilla-tilt.js demo site:
    https://micku7zu.github.io/vanilla-tilt.js/index.html
    */
    .tilt-root {
      height: 150px;
      background-color: red;
      width: 200px;
      background-image: -webkit-linear-gradient(
        315deg,
        #ff00ba 0%,
        #fae713 100%
      );
      background-image: linear-gradient(135deg, #ff00ba 0%, #fae713 100%);
      transform-style: preserve-3d;
      will-change: transform;
      transform: perspective(1000px) rotateX(0deg) rotateY(0deg)
        scale3d(1, 1, 1);
    }
    .tilt-child {
      position: absolute;
      width: 50%;
      height: 50%;
      top: 50%;
      left: 50%;
      transform: translateZ(30px) translateX(-50%) translateY(-50%);
      box-shadow: 0 0 50px 0 rgba(51, 51, 51, 0.3);
      background-color: white;
    }
    .totally-centered {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
  <script type="text/babel">
    function Tilt({children}) {
      // Here the useRef Hook...
      const tiltRef = React.useRef()

      React.useEffect(() => {
        //... and here the actual represented DOM object (<div>) by the Hook
        const tiltNode = tiltRef.current
        const vanillaTiltOptions = {
          max: 25,
          speed: 400,
          glare: true,
          'max-glare': 0.5,
        }
        // .init("this", "withTheseOptions")
        VanillaTilt.init(tiltNode, vanillaTiltOptions)

        /*
        This function is called prior to our vamilla-tilt-related object
        is updated (re-rendered). To understand:
        1- Object is first rendered -> useEffect(() => {...} is executed.
        2- Object changes, is re-rendered -> First return () => {...} is executed,
            and then useEffect(() => {...}.
        
        In this case, destroy() deletes the function from Vanilla-tilt
        and handlers created by it to avoid memory leaks.
        */
        return () => {
          tiltNode.vanillaTilt.destroy()
        } 
      },
      /*
      Actually, useEffect variables do not change over the time,
      so we do not need any dependecy array initially.
      However, by giving an empty array, we say useEffect must run the init function only
      only when the DOM object is mounted onto the page, and returned function must run
      only when the DOM object in unmounted from the page.
      */
       [])

      return (
        /*
        With 'ref' we stablish the link between this DOM object (<div>)
        and the React Hook 'useRef' as a manageable element.
        We can refer to whatever mutable thing, not only DOM elements.
        */
        <div ref={tiltRef} className="tilt-root">
          <div className="tilt-child">{children}</div>
        </div>
      )
    }

    function App() {
      const [showTilt, setShowTilt] = React.useState(true)
      return (
        <div>
          <label>
            <input
              type="checkbox"
              checked={showTilt}
              onChange={event => setShowTilt(event.target.checked)}
            />{' '}
            show tilt
          </label>
          {showTilt ? (
            <Tilt>
              <div className="totally-centered">vanilla-tilt.js</div>
            </Tilt>
          ) : null}
        </div>
      )
    }

    ReactDOM.render(<App />, document.getElementById('root'))
  </script>
</body>
